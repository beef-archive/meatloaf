(function(p,l,u,v,T,w,x,ae,C,I,j){"use strict";function O(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}function P(t){if(t&&t.__esModule)return t;var r=Object.create(null);return t&&Object.keys(t).forEach(function(s){if(s!=="default"){var n=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(r,s,n.get?n:{enumerable:!0,get:function(){return t[s]}})}}),r.default=t,Object.freeze(r)}var e=P(T),o=O(C);const[D,f,{GuildFeatures:z},N,a,c,g,i,{joinGuild:k},{getCurrentUser:B},d]=u.batchFind(({findByProps:t,findByDisplayName:r})=>{r("SettingsView"),t("dirtyDispatch"),t("GuildFeatures"),r("FormTitle"),r("FormText"),r("FormDivider"),r("Switch"),t("Sizes","Colors","Looks","DropdownSizes"),t("joinGuild"),t("getCurrentUser"),r("TextInput")});var A=Object.freeze({__proto__:null,SettingsView:D,FluxDispatcher:f,GuildFeatures:z,FormTitle:N,FormText:a,FormDivider:c,Switch:g,Button:i,joinGuild:k,getCurrentUser:B,TextInput:d});const R={modules:{...A}};function S(){return l.persist.ghost.generalExposeObject&&!window.Meddle?window.Meddle=R:!l.persist.ghost.generalExposeObject&&window.Meddle&&delete window.Meddle,()=>{delete window.Meddle}}function $(t){return e.createElement("div",{className:"beef-meddle-settings-title"},e.createElement(N,{tag:"h1"},"Meddle"),e.createElement(a,null,"A tool for those who like to mess with the Maze."),e.createElement(a,{className:"beef-meddle-subtext"},"Currently very WIP"))}function U({items:t}){let[r,s]=e.useState(0);return e.createElement("div",null,e.createElement("div",{className:"beef-meddle-settings-section"},e.createElement($,null),e.createElement(c,{className:"beef-meddle-settings-divider"}),e.createElement("div",{className:"beef-meddle-tabbar"},t.map((n,m)=>e.createElement("button",{className:"beef-meddle-button"+(m===r?" beef-meddle-selected":""),onClick:()=>s(m)},e.createElement(a,null,n.text))))),e.createElement(c,{className:"beef-meddle-settings-divider"}),e.createElement("div",{className:"beef-meddle-settings-section beef-meddle-tabbar-content"},e.createElement(w.ErrorBoundary,null,e.createElement(t[r].component,{goTo:s}))))}function W(t){return e.createElement("div",{className:"beef-meddle-settings-tab"},e.createElement("div",{class:"beef-meddle-switch-wrapper"},e.createElement(g,{checked:l.persist.ghost.generalExposeObject,onChange:r=>{l.persist.store.generalExposeObject=r,S()}}),e.createElement(a,null,"Expose a Meddle object on the window",e.createElement(a,{class:"beef-meddle-subtext"},"This contains several utilities such as some common Webpack modules."))))}const L=u.findByDisplayName("FormText"),G=u.findByDisplayName("Switch"),Y=u.findByDisplayName("TextInput");u.findByDisplayName("Select",!1).SingleSelect;const F=t=>({display:"flex",alignItems:"center",gap:".5rem",marginBottom:"1rem",marginLeft:t!==void 0?"1rem":0}),h=({k:t,depends:r,children:s})=>o.default.createElement("div",{style:F(r)},o.default.createElement(G,{checked:l.persist.ghost[t],disabled:r!==void 0&&!l.persist.ghost[r],onChange:n=>l.persist.store[t]=n}),o.default.createElement(L,{children:s})),V=({k:t,depends:r,children:s})=>o.default.createElement("div",{style:F(r)},o.default.createElement(Y,{value:l.persist.ghost[t],disabled:r!==void 0&&!l.persist.ghost[r],onChange:n=>l.persist.store[t]=n}),o.default.createElement(L,{children:s})),J=t=>r=>(x.useNest(l.persist),t(r)),q=(t,r=l.persist)=>{for(const s in t)r.ghost[s]===void 0&&(r.store[s]=t[s])};function E({k:t,depends:r,children:s}){return e.createElement("div",{class:"beef-meddle-textbox-wrapper"},e.createElement(V,{k:t,depends:r},s))}function H(t){return e.createElement("div",{className:"beef-meddle-settings-tab"},e.createElement(h,{k:"dispatchLogEnabled"},"Log all FluxDispatcher calls to console"),e.createElement(h,{k:"dispatchWhiteListMode"},"Dispatch logger whitelist mode"),e.createElement(E,{k:"dispatchIgnoreList"},"FluxDispatcher calls to hide when not in whitelist mode (comma separated)"),e.createElement(E,{k:"dispatchWhiteList"},"FluxDispatcher calls to allow when in whitelist mode (comma separated)"))}function M({text:t,color:r,size:s,look:n,func:m}){return e.createElement(i,{color:i.Colors[r]||i.Colors.BRAND,size:i.Sizes[s]||i.Sizes.SMALL,look:i.Looks[n]||i.Looks.FILLED,className:"beef-ms-settings-card-button",onClick:m},t)}function K(t){return e.createElement("div",{className:"beef-meddle-settings-tab"},e.createElement(E,{k:"serverId"},"Server ID"),e.createElement(h,{k:"serverLurkMode"},"Join as lurker"),e.createElement(M,{text:"Join",size:"MEDIUM",func:async()=>{k(l.persist.ghost.serverId,{lurker:l.persist.ghost.serverLurkMode})}}))}const b=I.nests.make({isPlaying:!1,position:0,track:{name:"Song Name",album:{image:{url:"https://raw.githubusercontent.com/Cumcord/assets/main/logo/filled.svg"},name:"Album Name"},duration:0,artists:[{name:"Artist Name",external_urls:{},href:{},id:"stub",type:"artist",url:"Artist URL"}]}});function Q(t){for(let r of Object.keys(b.ghost))b.store[r]=t[r]}function X(t){x.useNest(b);const r=b.store,s=b.ghost;return e.createElement("div",null,e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement("img",{src:s.track.album.image.url,height:"120",width:"120"}),e.createElement("div",{className:"beef-meddle-spotify-column"},e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement("div",{style:{width:"0.75rem"}}),e.createElement(d,{value:s.track.name,onChange:n=>{r.track.name=n}})),e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement(a,{style:{width:"0.75rem"}},"by"),e.createElement(d,{value:s.track.artists.map(n=>n.name).join(", "),onChange:n=>{r.track.artists=n.split(", ").map(m=>({name:m,external_urls:{},href:{},id:"stub",type:"artist",url:"Artist URL"}))}})),e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement(a,{style:{width:"0.75rem"}},"on"),e.createElement(d,{value:s.track.album.name,onChange:n=>{r.track.album.name=n}})))),e.createElement("div",{className:"beef-meddle-spotify-column",style:{marginLeft:"auto"}},e.createElement(M,{text:"Dispatch",size:"MEDIUM",func:async()=>{f.dispatch({...s,type:"SPOTIFY_PLAYER_STATE"})}}))),e.createElement(c,{className:"beef-meddle-settings-divider"}),e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement("div",{className:"beef-meddle-spotify-column"},e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement(a,{style:{width:"3rem"}},"Position (ms)"),e.createElement(d,{value:s.position,onChange:n=>{r.position=n}})),e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement(a,{style:{width:"3rem"}},"Duration (ms)"),e.createElement(d,{value:s.track.duration,onChange:n=>{r.track.duration=n}}))),e.createElement("div",{className:"beef-meddle-spotify-row",style:{marginLeft:"auto"}},e.createElement(a,null,"Playing"),e.createElement(g,{checked:s.isPlaying,onChange:n=>{r.isPlaying=n}}))),e.createElement(c,{className:"beef-meddle-settings-divider"}),e.createElement("div",{className:"beef-meddle-spotify-column"},e.createElement(a,null,"Image URL (only supports ",e.createElement("code",null,"https://i.scdn.co/image/*")," urls)"),e.createElement(d,{value:s.track.album.image.url,onChange:n=>{r.track.album.image.url=n}})),e.createElement(c,{className:"beef-meddle-settings-divider"}),e.createElement(a,{className:"beef-meddle-subtext"},"If this is out of date/incorrect, try updating the current state of your Spotify player."))}function Z(t){return e.createElement(w.ErrorBoundary,null,e.createElement("div",{className:"beef-meddle-settings"},e.createElement(U,{items:[{text:"General",component:W},{text:"FluxDispatcher",component:H},{text:"Servers",component:K},{text:"Spotify",component:X}]})))}var ee=()=>j.registerSection("MEDDLE","Meddle",J(Z));function te(){return v.after("dispatch",f,t=>{!l.persist.ghost.dispatchLogEnabled||l.persist.ghost.dispatchWhiteListMode&&!l.persist.ghost.dispatchWhiteList.split(",").includes(t[0].type)||l.persist.ghost.dispatchIgnoreList.split(",").includes(t[0].type)||console.log(t[0])})}const y=new Map;y.set("SPOTIFY_PLAYER_STATE",Q);function re(){for(const[t,r]of y)f.subscribe(t,r);return()=>{for(const[t,r]of y)f.unsubscribe(t,r)}}var se=()=>v.injectCSS(".beef-meddle-settings .beef-meddle-settings-title h1{margin-bottom:.2rem}.beef-meddle-settings .beef-meddle-settings-section{padding:1rem;border-radius:.5rem;background-color:var(--background-secondary)}.beef-meddle-settings .beef-meddle-settings-tab{padding:.25rem}.beef-meddle-settings .beef-meddle-settings-divider{margin-top:.5rem;margin-bottom:.5rem}.beef-meddle-subtext{font-size:x-small;color:var(--text-muted)}.beef-meddle-row{display:flex;gap:1rem}.beef-meddle-row :not(:last-child){flex:1}.beef-meddle-spotify-row{display:flex;gap:.5rem;align-items:center}.beef-meddle-spotify-column{display:flex;gap:.25rem;flex-direction:column}.beef-meddle-textbox-wrapper *{display:flex;flex-direction:column-reverse}.beef-meddle-textbox-wrapper * *{width:100%}.beef-meddle-switch-wrapper{display:flex;align-items:center;gap:.5rem}.beef-meddle-tabbar{padding:.25rem;display:flex;flex-direction:row;gap:.5rem}.beef-meddle-tabbar .beef-meddle-button *{cursor:pointer}.beef-meddle-tabbar *{padding:.2rem;border-radius:.3rem;width:fit-content;text-align:center;background:none}.theme-dark .beef-meddle-tabbar .beef-meddle-selected{background:rgba(255,255,255,.2666666667)}.theme-light .beef-meddle-tabbar .beef-meddle-selected{background:rgba(0,0,0,.2)}");q({dispatchLogEnabled:!1,dispatchIgnoreList:"",dispatchWhiteList:"",dispatchWhiteListMode:!1,serverId:"",serverLurkMode:!1,generalExposeObject:!0});const ne=[S(),ee(),te(),re(),se()];function le(){_.forEachRight(ne,t=>t())}return p.onUnload=le,Object.defineProperty(p,"__esModule",{value:!0}),p})({},cumcord.pluginData,cumcord.modules.webpack,cumcord.patcher,cumcord.modules.common.React,cumcord.ui.components,cumcord.utils,cumcord.plugins,cumcord.modules.common.React,cumcord.modules.internal,cumcord.ui.userSettings);
