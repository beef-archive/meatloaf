(function(b,l,m,w,j,x,N,de,P,O,$){"use strict";function D(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}function z(t){if(t&&t.__esModule)return t;var s=Object.create(null);return t&&Object.keys(t).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(s,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}}),s.default=t,Object.freeze(s)}var e=z(j),c=D(P);const[A,u,{GuildFeatures:R},S,a,d,h,i,{joinGuild:k},{getCurrentUser:U},o,g,L,T]=m.batchFind(({findByProps:t,findByDisplayName:s})=>{s("SettingsView"),t("dirtyDispatch"),t("GuildFeatures"),s("FormTitle"),s("FormText"),s("FormDivider"),s("Switch"),t("Sizes","Colors","Looks","DropdownSizes"),t("joinGuild"),t("getCurrentUser"),s("TextInput"),s("TabBar"),t("topPill"),t("tabBar","nowPlayingColumn")});var W=Object.freeze({__proto__:null,SettingsView:A,FluxDispatcher:u,GuildFeatures:R,FormTitle:S,FormText:a,FormDivider:d,Switch:h,Button:i,joinGuild:k,getCurrentUser:U,TextInput:o,TabBar:g,TabBarStyles:L,TabBarClasses:T});const G={modules:{...W}};function F(){return l.persist.ghost.generalExposeObject&&!window.Meddle?window.Meddle=G:!l.persist.ghost.generalExposeObject&&window.Meddle&&delete window.Meddle,()=>{delete window.Meddle}}function Y(t){return e.createElement("div",{className:"beef-meddle-settings-title"},e.createElement(S,{tag:"h1"},"Meddle"),e.createElement(a,null,"A tool for those who like to mess with the Maze."),e.createElement(a,{className:"beef-meddle-subtext"},"Currently very WIP"))}function V({items:t}){let[s,r]=e.useState(0);return e.createElement("div",null,e.createElement("div",{className:"beef-meddle-settings-section"},e.createElement(Y,null),e.createElement(d,{className:"beef-meddle-settings-divider"}),e.createElement(g,{type:L.topPill,className:T.tabBar,selectedItem:s,onItemSelect:r,style:{marginBottom:"0.25rem"}},t.map((n,p)=>e.createElement(g.Item,{id:p},n.text)))),e.createElement(d,{className:"beef-meddle-settings-divider"}),e.createElement("div",{className:"beef-meddle-settings-section beef-meddle-tabbar-content"},e.createElement(x.ErrorBoundary,null,e.createElement(t[s].component,{goTo:r}))))}function J(t){return e.createElement("div",{className:"beef-meddle-settings-tab"},e.createElement("div",{class:"beef-meddle-switch-wrapper"},e.createElement(h,{checked:l.persist.ghost.generalExposeObject,onChange:s=>{l.persist.store.generalExposeObject=s,F()}}),e.createElement(a,null,"Expose a Meddle object on the window",e.createElement(a,{class:"beef-meddle-subtext"},"This contains several utilities such as some common Webpack modules."))))}const I=m.findByDisplayName("FormText"),q=m.findByDisplayName("Switch"),H=m.findByDisplayName("TextInput");m.findByDisplayName("Select",!1).SingleSelect;const M=t=>({display:"flex",alignItems:"center",gap:".5rem",marginBottom:"1rem",marginLeft:t!==void 0?"1rem":0}),E=({k:t,depends:s,children:r})=>c.default.createElement("div",{style:M(s)},c.default.createElement(q,{checked:l.persist.ghost[t],disabled:s!==void 0&&!l.persist.ghost[s],onChange:n=>l.persist.store[t]=n}),c.default.createElement(I,{children:r})),K=({k:t,depends:s,children:r})=>c.default.createElement("div",{style:M(s)},c.default.createElement(H,{value:l.persist.ghost[t],disabled:s!==void 0&&!l.persist.ghost[s],onChange:n=>l.persist.store[t]=n}),c.default.createElement(I,{children:r})),Q=t=>s=>(N.useNest(l.persist),t(s)),X=(t,s=l.persist)=>{for(const r in t)s.ghost[r]===void 0&&(s.store[r]=t[r])};function y({k:t,depends:s,children:r}){return e.createElement("div",{class:"beef-meddle-textbox-wrapper"},e.createElement(K,{k:t,depends:s},r))}function Z(t){return e.createElement("div",{className:"beef-meddle-settings-tab"},e.createElement(E,{k:"dispatchLogEnabled"},"Log all FluxDispatcher calls to console"),e.createElement(E,{k:"dispatchWhiteListMode"},"Dispatch logger whitelist mode"),e.createElement(y,{k:"dispatchIgnoreList"},"FluxDispatcher calls to hide when not in whitelist mode (comma separated)"),e.createElement(y,{k:"dispatchWhiteList"},"FluxDispatcher calls to allow when in whitelist mode (comma separated)"))}function C({text:t,color:s,size:r,look:n,func:p}){return e.createElement(i,{color:i.Colors[s]||i.Colors.BRAND,size:i.Sizes[r]||i.Sizes.SMALL,look:i.Looks[n]||i.Looks.FILLED,className:"beef-ms-settings-card-button",onClick:p},t)}function ee(t){return e.createElement("div",{className:"beef-meddle-settings-tab"},e.createElement(y,{k:"serverId"},"Server ID"),e.createElement(E,{k:"serverLurkMode"},"Join as lurker"),e.createElement(C,{text:"Join",size:"MEDIUM",func:async()=>{k(l.persist.ghost.serverId,{lurker:l.persist.ghost.serverLurkMode})}}))}const B={isPlaying:!1,position:0,track:{name:"Song Name",album:{image:{url:"https://raw.githubusercontent.com/Cumcord/assets/main/logo/filled.svg"},name:"Album Name"},duration:0,artists:[{name:"Artist Name",external_urls:{},href:{},id:"stub",type:"artist",url:"Artist URL"}]}},f=O.nests.make(Object.assign({},B));function te(t){for(let s of Object.keys(f.ghost))f.store[s]=t.track||t.context?t[s]:B[s]}function se(t){N.useNest(f);const s=f.store,r=f.ghost;return e.createElement("div",null,e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement("img",{src:r.track.album.image.url,height:"120",width:"120"}),e.createElement("div",{className:"beef-meddle-spotify-column"},e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement("div",{style:{width:"0.75rem"}}),e.createElement(o,{value:r.track.name,onChange:n=>{s.track.name=n}})),e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement(a,{style:{width:"0.75rem"}},"by"),e.createElement(o,{value:r.track.artists.map(n=>n.name).join(", "),onChange:n=>{s.track.artists=n.split(", ").map(p=>({name:p,external_urls:{},href:{},id:"stub",type:"artist",url:"Artist URL"}))}})),e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement(a,{style:{width:"0.75rem"}},"on"),e.createElement(o,{value:r.track.album.name,onChange:n=>{s.track.album.name=n}})))),e.createElement("div",{className:"beef-meddle-spotify-column",style:{marginLeft:"auto"}},e.createElement(C,{text:"Dispatch",size:"MEDIUM",func:async()=>{u.dispatch({...r,type:"SPOTIFY_PLAYER_STATE"})}}))),e.createElement(d,{className:"beef-meddle-settings-divider"}),e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement("div",{className:"beef-meddle-spotify-column"},e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement(a,{style:{width:"3rem"}},"Position (ms)"),e.createElement(o,{value:r.position,onChange:n=>{s.position=n}})),e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement(a,{style:{width:"3rem"}},"Duration (ms)"),e.createElement(o,{value:r.track.duration,onChange:n=>{s.track.duration=n}}))),e.createElement("div",{className:"beef-meddle-spotify-row",style:{marginLeft:"auto"}},e.createElement(a,null,"Playing"),e.createElement(h,{checked:r.isPlaying,onChange:n=>{s.isPlaying=n}}))),e.createElement(d,{className:"beef-meddle-settings-divider"}),e.createElement("div",{className:"beef-meddle-spotify-column"},e.createElement(a,null,"Image URL (only supports ",e.createElement("code",null,"https://i.scdn.co/image/*")," urls)"),e.createElement(o,{value:r.track.album.image.url,onChange:n=>{s.track.album.image.url=n}})),e.createElement(d,{className:"beef-meddle-settings-divider"}),e.createElement(a,{className:"beef-meddle-subtext"},"If this is out of date/incorrect, try updating the current state of your Spotify player."))}function re(t){return e.createElement(x.ErrorBoundary,null,e.createElement("div",{className:"beef-meddle-settings"},e.createElement(V,{items:[{text:"General",component:J},{text:"FluxDispatcher",component:Z},{text:"Servers",component:ee},{text:"Spotify",component:se}]})))}var ne=()=>$.registerSection("MEDDLE","Meddle",Q(re));function le(){return w.after("dispatch",u,t=>{!l.persist.ghost.dispatchLogEnabled||l.persist.ghost.dispatchWhiteListMode&&!l.persist.ghost.dispatchWhiteList.split(",").includes(t[0].type)||l.persist.ghost.dispatchIgnoreList.split(",").includes(t[0].type)||console.log(t[0])})}const v=new Map;v.set("SPOTIFY_PLAYER_STATE",te);function ae(){for(const[t,s]of v)u.subscribe(t,s);return()=>{for(const[t,s]of v)u.unsubscribe(t,s)}}var ie=()=>w.injectCSS(".beef-meddle-settings .beef-meddle-settings-title h1{margin-bottom:.2rem}.beef-meddle-settings .beef-meddle-settings-section{padding:1rem;border-radius:.5rem;background-color:var(--background-secondary)}.beef-meddle-settings .beef-meddle-settings-tab{padding:.25rem}.beef-meddle-settings .beef-meddle-settings-divider{margin-top:.5rem;margin-bottom:1rem}.beef-meddle-subtext{font-size:x-small;color:var(--text-muted)}.beef-meddle-row{display:flex;gap:1rem}.beef-meddle-row :not(:last-child){flex:1}.beef-meddle-spotify-row{display:flex;gap:.5rem;align-items:center}.beef-meddle-spotify-column{display:flex;gap:.25rem;flex-direction:column}.beef-meddle-textbox-wrapper *{display:flex;flex-direction:column-reverse}.beef-meddle-textbox-wrapper * *{width:100%}.beef-meddle-switch-wrapper{display:flex;align-items:center;gap:.5rem}");X({dispatchLogEnabled:!1,dispatchIgnoreList:"",dispatchWhiteList:"",dispatchWhiteListMode:!1,serverId:"",serverLurkMode:!1,generalExposeObject:!0});const oe=[F(),ne(),le(),ae(),ie()];function ce(){_.forEachRight(oe,t=>t())}return b.onUnload=ce,Object.defineProperty(b,"__esModule",{value:!0}),b})({},cumcord.pluginData,cumcord.modules.webpack,cumcord.patcher,cumcord.modules.common.React,cumcord.ui.components,cumcord.utils,cumcord.plugins,cumcord.modules.common.React,cumcord.modules.internal,cumcord.ui.userSettings);
