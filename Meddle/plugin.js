(function(p,l,c,v,M,y,x,ge,B,I,j){"use strict";function F(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function $(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach(function(n){if(n!=="default"){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}}),r.default=e,Object.freeze(r)}var t=$(M),d=F(B);const[{getChannel:P},{getGuild:O},{getCurrentUser:A},{getUser:D},{getMessage:W},{getToken:U}]=c.batchFind(({findByProps:e,findByDisplayName:r,findByDisplayNameAll:n})=>{e("hasChannel"),e("getGuild"),e("getCurrentUser"),e("getUser"),e("getMessage"),e("getToken")}),z={modules:{getChannel:P,getGuild:O,getCurrentUser:A,getUser:D,getMessage:W,getToken:U}};function w(){return l.persist.ghost.generalExposeObject&&!window.Meddle?window.Meddle=z:!l.persist.ghost.generalExposeObject&&window.Meddle&&delete window.Meddle,()=>{delete window.Meddle}}const[be,h,R,m,a,k,i,G,L,Y,J,{GuildFeatures:Ee},{joinGuild:V}]=c.batchFind(({findByProps:e,findByDisplayName:r,findByDisplayNameAll:n})=>{r("SettingsView"),e("dirtyDispatch"),r("FormTitle"),r("FormText"),r("FormDivider"),r("Switch"),e("Sizes","Colors","Looks","DropdownSizes"),r("TextInput"),r("TabBar"),e("topPill"),e("tabBar","nowPlayingColumn"),e("GuildFeatures"),e("joinGuild")});function q(e){return t.createElement("div",null,t.createElement(R,{style:{marginBottom:"0.2rem"},tag:"h1"},"Meddle"),t.createElement(m,null,"A tool for those who like to mess with the Maze."))}function H({items:e}){let[r,n]=t.useState(0);return t.createElement("div",null,t.createElement("div",{className:"beef-meddle-card"},t.createElement(q,null),t.createElement(a,{className:"beef-meddle-divider"}),t.createElement(L,{type:Y.topPill,className:J.tabBar,selectedItem:r,onItemSelect:n},e.map((s,o)=>t.createElement(L.Item,{id:o},s.text)))),t.createElement(a,{className:"beef-meddle-divider"}),t.createElement("div",{className:"beef-meddle-settings-section beef-meddle-card"},t.createElement(y.ErrorBoundary,null,t.createElement(e[r].component,{goTo:n}))))}function K({text:e,subtext:r,checked:n,onChange:s}){return t.createElement("div",{class:"beef-meddle-switch"},t.createElement(k,{checked:n,onChange:s}),t.createElement(m,null,e,t.createElement(m,{class:"beef-meddle-subtext"},r)))}function Q(e){return t.createElement("div",null,t.createElement(K,{text:"Expose a Meddle object on the window",subtext:"This contains several utilities such as some common Webpack modules.",checked:l.persist.ghost.generalExposeObject,onChange:r=>{l.persist.store.generalExposeObject=r,w()}}))}const S=c.findByDisplayName("FormText"),X=c.findByDisplayName("Switch"),Z=c.findByDisplayName("TextInput");c.findByDisplayName("Select",!1).SingleSelect;const N=e=>({display:"flex",alignItems:"center",gap:".5rem",marginBottom:"1rem",marginLeft:e!==void 0?"1rem":0}),ee=({k:e,depends:r,children:n})=>d.default.createElement("div",{style:N(r)},d.default.createElement(X,{checked:l.persist.ghost[e],disabled:r!==void 0&&!l.persist.ghost[r],onChange:s=>l.persist.store[e]=s}),d.default.createElement(S,{children:n})),te=({k:e,depends:r,children:n})=>d.default.createElement("div",{style:N(r)},d.default.createElement(Z,{value:l.persist.ghost[e],disabled:r!==void 0&&!l.persist.ghost[r],onChange:s=>l.persist.store[e]=s}),d.default.createElement(S,{children:n})),re=e=>r=>(x.useNest(l.persist),e(r)),ne=(e,r=l.persist)=>{for(const n in e)r.ghost[n]===void 0&&(r.store[n]=e[n])};function g({k:e,depends:r,children:n}){return t.createElement("div",{class:"beef-meddle-persist-textbox-wrapper"},t.createElement(te,{k:e,depends:r},n))}function b({k:e,depends:r,children:n}){return t.createElement("div",{class:"beef-meddle-persist-switch-wrapper"},t.createElement(ee,{k:e,depends:r},n))}function se(e){return t.createElement("div",null,t.createElement("div",{class:"beef-meddle-column"},t.createElement(b,{k:"dispatchLogEnabled"},"Log all FluxDispatcher calls to console"),t.createElement(b,{k:"dispatchWhiteListMode"},"Dispatch logger whitelist mode")),t.createElement(a,{className:"beef-meddle-divider"}),t.createElement("div",{class:"beef-meddle-column"},t.createElement(g,{k:"dispatchIgnoreList"},"FluxDispatcher calls to hide when not in whitelist mode (comma separated)"),t.createElement(g,{k:"dispatchWhiteList"},"FluxDispatcher calls to allow when in whitelist mode (comma separated)")))}function C({text:e,color:r,size:n,look:s,func:o,style:pe}){return t.createElement(i,{style:pe,color:i.Colors[r]||i.Colors.BRAND,size:i.Sizes[n]||i.Sizes.SMALL,look:i.Looks[s]||i.Looks.FILLED,onClick:o},e)}function le(e){return t.createElement("div",null,t.createElement(g,{k:"serverId"},"Server ID"),t.createElement(a,{className:"beef-meddle-divider"}),t.createElement("div",{class:"beef-meddle-row"},t.createElement(b,{k:"serverLurkMode"},"Join as lurker"),t.createElement(C,{style:{marginLeft:"auto"},text:"Join",size:"SMALL",func:async()=>{V(l.persist.ghost.serverId,{lurker:l.persist.ghost.serverLurkMode})}})))}const T={isPlaying:!1,position:0,track:{name:"Song Name",album:{image:{url:"https://raw.githubusercontent.com/Cumcord/assets/main/logo/filled.svg"},name:"Album Name"},duration:0,artists:[{name:"Artist Name",external_urls:{},href:{},id:"stub",type:"artist",url:"Artist URL"}]}},f=I.nests.make(Object.assign({},T));function ae(e){for(let r of Object.keys(f.ghost))f.store[r]=e.track||e.context?e[r]:T[r]}function u({value:e,onChange:r,variant:n="column",fixedWidth:s,children:o}){if(n!=="column"&&n!=="row")throw new Error("Component Error - Textbox: variant should be column (default) or row");return t.createElement("div",{class:n==="column"?"beef-meddle-column":"beef-meddle-row beef-meddle-center"},t.createElement(m,{style:s?{width:s}:{}},o),t.createElement(G,{value:e,onChange:r}))}function ie(e){x.useNest(f);const r=f.store,n=f.ghost;return t.createElement("div",null,t.createElement("div",{className:"beef-meddle-row"},t.createElement("div",{className:"beef-meddle-row beef-meddle-center"},t.createElement("img",{src:n.track.album.image.url,height:"120",width:"120"}),t.createElement("div",{className:"beef-meddle-column"},t.createElement(u,{fixedWidth:"0.75rem",variant:"row",value:n.track.name,onChange:s=>{r.track.name=s}}),t.createElement(u,{fixedWidth:"0.75rem",variant:"row",value:n.track.artists.map(s=>s.name).join(", "),onChange:s=>{r.track.artists=s.split(", ").map(o=>({name:o,external_urls:{},href:{},id:"stub",type:"artist",url:"Artist URL"}))}},"by"),t.createElement(u,{fixedWidth:"0.75rem",variant:"row",value:n.track.album.name,onChange:s=>{r.track.album.name=s}},"on"))),t.createElement("div",{className:"beef-meddle-column",style:{marginLeft:"auto"}},t.createElement(C,{text:"Dispatch",size:"MEDIUM",func:async()=>{h.dispatch({...n,type:"SPOTIFY_PLAYER_STATE"})}}))),t.createElement(a,{className:"beef-meddle-divider"}),t.createElement("div",{className:"beef-meddle-row"},t.createElement("div",{className:"beef-meddle-column"},t.createElement(u,{fixedWidth:"3rem",variant:"row",value:n.position,onChange:s=>{r.position=s}},"Position (ms)"),t.createElement(u,{fixedWidth:"3rem",variant:"row",value:n.track.duration,onChange:s=>{r.track.duration=s}},"Duration (ms)")),t.createElement("div",{className:"beef-meddle-row beef-meddle-center",style:{marginLeft:"auto"}},t.createElement(m,null,"Playing"),t.createElement(k,{checked:n.isPlaying,onChange:s=>{r.isPlaying=s}}))),t.createElement(a,{className:"beef-meddle-divider"}),t.createElement(u,{value:n.track.album.image.url,onChange:s=>{r.track.album.image.url=s}},"Image URL (only supports ",t.createElement("code",null,"https://i.scdn.co/image/*")," urls)"),t.createElement(a,{className:"beef-meddle-divider"}),t.createElement(m,{className:"beef-meddle-subtext"},"If this is out of date/incorrect, try updating the current state of your Spotify player."))}function oe(e){return t.createElement(y.ErrorBoundary,null,t.createElement("div",{className:"beef-meddle-settings"},t.createElement(H,{items:[{text:"General",component:Q},{text:"FluxDispatcher",component:se},{text:"Servers",component:le},{text:"Spotify",component:ie}]})))}var ce=()=>j.registerSection("MEDDLE","Meddle",re(oe));function de(){return v.after("dispatch",h,e=>{!l.persist.ghost.dispatchLogEnabled||l.persist.ghost.dispatchWhiteListMode&&!l.persist.ghost.dispatchWhiteList.split(",").includes(e[0].type)||l.persist.ghost.dispatchIgnoreList.split(",").includes(e[0].type)||console.log(e[0])})}const E=new Map;E.set("SPOTIFY_PLAYER_STATE",ae);function me(){for(const[e,r]of E)h.subscribe(e,r);return()=>{for(const[e,r]of E)h.unsubscribe(e,r)}}var ue=()=>v.injectCSS(".beef-meddle-row{display:flex;gap:.5rem}.beef-meddle-column{display:flex;flex-direction:column;gap:.5rem}.beef-meddle-divider{margin-top:.5rem;margin-bottom:.5rem}.beef-meddle-subtext{font-size:x-small;color:var(--text-muted)}.beef-meddle-card{padding:1rem;border-radius:.5rem;background-color:var(--background-secondary)}.beef-meddle-center{display:flex;justify-content:center;align-items:center}.beef-meddle-persist-textbox-wrapper *{display:flex;flex-direction:column-reverse}.beef-meddle-persist-textbox-wrapper * *{width:100%}.beef-meddle-persist-switch-wrapper{display:flex}.beef-meddle-persist-switch-wrapper *{margin-bottom:0!important;align-items:center}.beef-meddle-switch{display:flex;align-items:center;gap:.5rem}");ne({dispatchLogEnabled:!1,dispatchIgnoreList:"",dispatchWhiteList:"",dispatchWhiteListMode:!1,serverId:"",serverLurkMode:!1,generalExposeObject:!0});const fe=[w(),ce(),de(),me(),ue()];function he(){_.forEachRight(fe,e=>e())}return p.onUnload=he,Object.defineProperty(p,"__esModule",{value:!0}),p})({},cumcord.pluginData,cumcord.modules.webpack,cumcord.patcher,cumcord.modules.common.React,cumcord.ui.components,cumcord.utils,cumcord.plugins,cumcord.modules.common.React,cumcord.modules.internal,cumcord.ui.userSettings);
