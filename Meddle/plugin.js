(function(g,n,u,w,W,x,N,Se,G,A,H){"use strict";function V(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}function J(t){if(t&&t.__esModule)return t;var s=Object.create(null);return t&&Object.keys(t).forEach(function(r){if(r!=="default"){var d=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(s,r,d.get?d:{enumerable:!0,get:function(){return t[r]}})}}),s.default=t,Object.freeze(s)}var e=J(W),m=V(G);const[Y,f,{GuildFeatures:q},k,l,b,h,i,{joinGuild:S},{getCurrentUser:K},o]=u.batchFind(({findByProps:t,findByDisplayName:s})=>{s("SettingsView"),t("dirtyDispatch"),t("GuildFeatures"),s("FormTitle"),s("FormText"),s("FormDivider"),s("Switch"),t("Sizes","Colors","Looks","DropdownSizes"),t("joinGuild"),t("getCurrentUser"),s("TextInput")});var Q=Object.freeze({__proto__:null,SettingsView:Y,FluxDispatcher:f,GuildFeatures:q,FormTitle:k,FormText:l,FormDivider:b,Switch:h,Button:i,joinGuild:S,getCurrentUser:K,TextInput:o});const X={modules:{...Q}};function L(){return n.persist.ghost.generalExposeObject&&!window.Meddle?window.Meddle=X:!n.persist.ghost.generalExposeObject&&window.Meddle&&delete window.Meddle,()=>{delete window.Meddle}}function Z(t){return e.createElement("div",{className:"beef-meddle-settings-title"},e.createElement(k,{tag:"h1"},"Meddle"),e.createElement(l,null,"A tool for those who like to mess with the Maze."),e.createElement(l,{className:"beef-meddle-subtext"},"Currently very WIP"))}function ee({items:t}){let[s,r]=e.useState(0);return e.createElement("div",null,e.createElement("div",{className:"beef-meddle-settings-section"},e.createElement(Z,null),e.createElement(b,{className:"beef-meddle-settings-divider"}),e.createElement("div",{className:"beef-meddle-tabbar"},t.map((d,c)=>e.createElement("button",{className:"beef-meddle-button"+(c===s?" beef-meddle-selected":""),onClick:()=>r(c)},e.createElement(l,null,d.text))))),e.createElement(b,{className:"beef-meddle-settings-divider"}),e.createElement("div",{className:"beef-meddle-settings-section beef-meddle-tabbar-content"},e.createElement(x.ErrorBoundary,null,e.createElement(t[s].component,{goTo:r}))))}function te(t){return e.createElement("div",{className:"beef-meddle-settings-tab"},e.createElement("div",{class:"beef-meddle-switch-wrapper"},e.createElement(h,{checked:n.persist.ghost.generalExposeObject,onChange:s=>{n.persist.store.generalExposeObject=s,L()}}),e.createElement(l,null,"Expose a Meddle object on the window",e.createElement(l,{class:"beef-meddle-subtext"},"This contains several utilities such as some common Webpack modules."))))}const M=u.findByDisplayName("FormText"),se=u.findByDisplayName("Switch"),re=u.findByDisplayName("TextInput");u.findByDisplayName("Select",!1).SingleSelect;const F=t=>({display:"flex",alignItems:"center",gap:".5rem",marginBottom:"1rem",marginLeft:t!==void 0?"1rem":0}),E=({k:t,depends:s,children:r})=>m.default.createElement("div",{style:F(s)},m.default.createElement(se,{checked:n.persist.ghost[t],disabled:s!==void 0&&!n.persist.ghost[s],onChange:d=>n.persist.store[t]=d}),m.default.createElement(M,{children:r})),ne=({k:t,depends:s,children:r})=>m.default.createElement("div",{style:F(s)},m.default.createElement(re,{value:n.persist.ghost[t],disabled:s!==void 0&&!n.persist.ghost[s],onChange:d=>n.persist.store[t]=d}),m.default.createElement(M,{children:r})),ae=t=>s=>(N.useNest(n.persist),t(s)),le=(t,s=n.persist)=>{for(const r in t)s.ghost[r]===void 0&&(s.store[r]=t[r])};function y({k:t,depends:s,children:r}){return e.createElement("div",{class:"beef-meddle-textbox-wrapper"},e.createElement(ne,{k:t,depends:s},r))}function de(t){return e.createElement("div",{className:"beef-meddle-settings-tab"},e.createElement(E,{k:"dispatchLogEnabled"},"Log all FluxDispatcher calls to console"),e.createElement(E,{k:"dispatchWhiteListMode"},"Dispatch logger whitelist mode"),e.createElement(y,{k:"dispatchIgnoreList"},"FluxDispatcher calls to hide when not in whitelist mode (comma separated)"),e.createElement(y,{k:"dispatchWhiteList"},"FluxDispatcher calls to allow when in whitelist mode (comma separated)"))}function C({text:t,color:s,size:r,look:d,func:c}){return e.createElement(i,{color:i.Colors[s]||i.Colors.BRAND,size:i.Sizes[r]||i.Sizes.SMALL,look:i.Looks[d]||i.Looks.FILLED,className:"beef-ms-settings-card-button",onClick:c},t)}function ie(t){return e.createElement("div",{className:"beef-meddle-settings-tab"},e.createElement(y,{k:"serverId"},"Server ID"),e.createElement(E,{k:"serverLurkMode"},"Join as lurker"),e.createElement(C,{text:"Join",size:"MEDIUM",func:async()=>{S(n.persist.ghost.serverId,{lurker:n.persist.ghost.serverLurkMode})}}))}const p=A.nests.make({data:{},songHasPlayed:!1});function oe(t){p.songHasPlayed=!0,p.store.data=t}function ce(t){N.useNest(p);const s=p.ghost.data,[r,d]=e.useState(),[c,Ee]=e.useState(),[I,ye]=e.useState(),[j,ve]=e.useState(),[T,we]=e.useState(),[P,xe]=e.useState(),[O,Ne]=e.useState();if(!p.songHasPlayed&&!s.track)return e.createElement(l,null,"No song has played during Meddle's runtime. Either play a new song or modify the state of your current one.");{const D=r===void 0?s.track.name:r,z=c===void 0?s.track.artists.map(a=>a.name).join(", "):c,B=I===void 0?s.track.album.name:I,$=j===void 0?s.position:j,ke=T===void 0?s.track.duration:T,U=P===void 0?s.isPlaying:P,R=O===void 0?s.track.album.image.url:O;return e.createElement("div",null,e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement("img",{src:s.track.album.image.url,height:"120",width:"120"}),e.createElement("div",{className:"beef-meddle-spotify-column"},e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement("div",{style:{width:"0.75rem"}}),e.createElement(o,{value:D,onChange:a=>{d(a)}})),e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement(l,{style:{width:"0.75rem"}},"by"),e.createElement(o,{value:z,onChange:a=>{Ee(a)}})),e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement(l,{style:{width:"0.75rem"}},"on"),e.createElement(o,{value:B,onChange:a=>{ye(a)}})))),e.createElement("div",{className:"beef-meddle-spotify-column",style:{marginLeft:"auto"}},e.createElement(C,{text:"Dispatch",size:"MEDIUM",func:async()=>{f.dispatch({...s,isPlaying:U,position:$,track:{...s.track,name:D,album:{...s.track.album,image:{...s.track.album.image,url:R},name:B},artists:z.split(", ").map(a=>({name:a,external_urls:{},href:{},id:"stub",type:"artist",url:""}))}})}}))),e.createElement(b,{className:"beef-meddle-settings-divider"}),e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement("div",{className:"beef-meddle-spotify-column"},e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement(l,{style:{width:"3rem"}},"Position (ms)"),e.createElement(o,{value:$,onChange:a=>{ve(a)}})),e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement(l,{style:{width:"3rem"}},"Duration (ms)"),e.createElement(o,{value:ke,onChange:a=>{we(a)}}))),e.createElement("div",{className:"beef-meddle-spotify-row",style:{marginLeft:"auto"}},e.createElement(l,null,"Playing"),e.createElement(h,{checked:U,onChange:a=>{xe(a)}}))),e.createElement(b,{className:"beef-meddle-settings-divider"}),e.createElement("div",{className:"beef-meddle-spotify-column"},e.createElement(l,null,"Image URL"),e.createElement(o,{value:R,onChange:a=>{Ne(a)}})))}}function me(t){return e.createElement(x.ErrorBoundary,null,e.createElement("div",{className:"beef-meddle-settings"},e.createElement(ee,{items:[{text:"General",component:te},{text:"FluxDispatcher",component:de},{text:"Servers",component:ie},{text:"Spotify",component:ce}]})))}var ue=()=>H.registerSection("MEDDLE","Meddle",ae(me));function fe(){return w.after("dispatch",f,t=>{!n.persist.ghost.dispatchLogEnabled||n.persist.ghost.dispatchWhiteListMode&&!n.persist.ghost.dispatchWhiteList.split(",").includes(t[0].type)||n.persist.ghost.dispatchIgnoreList.split(",").includes(t[0].type)||console.log(t[0])})}const v=new Map;v.set("SPOTIFY_PLAYER_STATE",oe);function be(){for(const[t,s]of v)f.subscribe(t,s);return()=>{for(const[t,s]of v)f.unsubscribe(t,s)}}var pe=()=>w.injectCSS(".beef-meddle-settings .beef-meddle-settings-title h1{margin-bottom:.2rem}.beef-meddle-settings .beef-meddle-settings-section{padding:1rem;border-radius:.5rem;background-color:var(--background-secondary)}.beef-meddle-settings .beef-meddle-settings-tab{padding:.25rem}.beef-meddle-settings .beef-meddle-settings-divider{margin-top:.5rem;margin-bottom:.5rem}.beef-meddle-subtext{font-size:x-small;color:var(--text-muted)}.beef-meddle-row{display:flex;gap:1rem}.beef-meddle-row :not(:last-child){flex:1}.beef-meddle-spotify-row{display:flex;gap:.5rem;align-items:center}.beef-meddle-spotify-column{display:flex;gap:.25rem;flex-direction:column}.beef-meddle-textbox-wrapper *{display:flex;flex-direction:column-reverse}.beef-meddle-textbox-wrapper * *{width:100%}.beef-meddle-switch-wrapper{display:flex;align-items:center;gap:.5rem}.beef-meddle-tabbar{padding:.25rem;display:flex;flex-direction:row;gap:.5rem}.beef-meddle-tabbar .beef-meddle-button *{cursor:pointer}.beef-meddle-tabbar *{padding:.2rem;border-radius:.3rem;width:fit-content;text-align:center;background:none}.theme-dark .beef-meddle-tabbar .beef-meddle-selected{background:rgba(255,255,255,.2666666667)}.theme-light .beef-meddle-tabbar .beef-meddle-selected{background:rgba(0,0,0,.2)}");le({dispatchLogEnabled:!1,dispatchIgnoreList:"",dispatchWhiteList:"",dispatchWhiteListMode:!1,serverId:"",serverLurkMode:!1,generalExposeObject:!0});const ge=[L(),ue(),fe(),be(),pe()];function he(){_.forEachRight(ge,t=>t())}return g.onUnload=he,Object.defineProperty(g,"__esModule",{value:!0}),g})({},cumcord.pluginData,cumcord.modules.webpack,cumcord.patcher,cumcord.modules.common.React,cumcord.ui.components,cumcord.utils,cumcord.plugins,cumcord.modules.common.React,cumcord.modules.internal,cumcord.ui.userSettings);
