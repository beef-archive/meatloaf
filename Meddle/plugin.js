(function(h,a,u,x,O,w,k,pe,P,$,A){"use strict";function D(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}function W(t){if(t&&t.__esModule)return t;var r=Object.create(null);return t&&Object.keys(t).forEach(function(n){if(n!=="default"){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}}),r.default=t,Object.freeze(r)}var e=W(O),d=D(P);const[z,f,{GuildFeatures:R},S,o,l,b,i,{joinGuild:L},{getCurrentUser:U},N,E,T,C]=u.batchFind(({findByProps:t,findByDisplayName:r,findByDisplayNameAll:n})=>{r("SettingsView"),t("dirtyDispatch"),t("GuildFeatures"),r("FormTitle"),r("FormText"),r("FormDivider"),r("Switch"),t("Sizes","Colors","Looks","DropdownSizes"),t("joinGuild"),t("getCurrentUser"),r("TextInput"),r("TabBar"),t("topPill"),t("tabBar","nowPlayingColumn")});var G=Object.freeze({__proto__:null,SettingsView:z,FluxDispatcher:f,GuildFeatures:R,FormTitle:S,FormText:o,FormDivider:l,Switch:b,Button:i,joinGuild:L,getCurrentUser:U,TextInput:N,TabBar:E,TabBarStyles:T,TabBarClasses:C});const Y={modules:{...G}};function F(){return a.persist.ghost.generalExposeObject&&!window.Meddle?window.Meddle=Y:!a.persist.ghost.generalExposeObject&&window.Meddle&&delete window.Meddle,()=>{delete window.Meddle}}function V(t){return e.createElement("div",null,e.createElement(S,{style:{marginBottom:"0.2rem"},tag:"h1"},"Meddle"),e.createElement(o,null,"A tool for those who like to mess with the Maze."))}function J({items:t}){let[r,n]=e.useState(0);return e.createElement("div",null,e.createElement("div",{className:"beef-meddle-card"},e.createElement(V,null),e.createElement(l,{className:"beef-meddle-divider"}),e.createElement(E,{type:T.topPill,className:C.tabBar,selectedItem:r,onItemSelect:n},t.map((s,c)=>e.createElement(E.Item,{id:c},s.text)))),e.createElement(l,{className:"beef-meddle-divider"}),e.createElement("div",{className:"beef-meddle-settings-section beef-meddle-card"},e.createElement(w.ErrorBoundary,null,e.createElement(t[r].component,{goTo:n}))))}function q({text:t,subtext:r,checked:n,onChange:s}){return e.createElement("div",{class:"beef-meddle-switch"},e.createElement(b,{checked:n,onChange:s}),e.createElement(o,null,t,e.createElement(o,{class:"beef-meddle-subtext"},r)))}function H(t){return e.createElement("div",null,e.createElement(q,{text:"Expose a Meddle object on the window",subtext:"This contains several utilities such as some common Webpack modules.",checked:a.persist.ghost.generalExposeObject,onChange:r=>{a.persist.store.generalExposeObject=r,F()}}))}const B=u.findByDisplayName("FormText"),K=u.findByDisplayName("Switch"),Q=u.findByDisplayName("TextInput");u.findByDisplayName("Select",!1).SingleSelect;const M=t=>({display:"flex",alignItems:"center",gap:".5rem",marginBottom:"1rem",marginLeft:t!==void 0?"1rem":0}),X=({k:t,depends:r,children:n})=>d.default.createElement("div",{style:M(r)},d.default.createElement(K,{checked:a.persist.ghost[t],disabled:r!==void 0&&!a.persist.ghost[r],onChange:s=>a.persist.store[t]=s}),d.default.createElement(B,{children:n})),Z=({k:t,depends:r,children:n})=>d.default.createElement("div",{style:M(r)},d.default.createElement(Q,{value:a.persist.ghost[t],disabled:r!==void 0&&!a.persist.ghost[r],onChange:s=>a.persist.store[t]=s}),d.default.createElement(B,{children:n})),ee=t=>r=>(k.useNest(a.persist),t(r)),te=(t,r=a.persist)=>{for(const n in t)r.ghost[n]===void 0&&(r.store[n]=t[n])};function g({k:t,depends:r,children:n}){return e.createElement("div",{class:"beef-meddle-persist-textbox-wrapper"},e.createElement(Z,{k:t,depends:r},n))}function v({k:t,depends:r,children:n}){return e.createElement("div",{class:"beef-meddle-persist-switch-wrapper"},e.createElement(X,{k:t,depends:r},n))}function re(t){return e.createElement("div",null,e.createElement("div",{class:"beef-meddle-column"},e.createElement(v,{k:"dispatchLogEnabled"},"Log all FluxDispatcher calls to console"),e.createElement(v,{k:"dispatchWhiteListMode"},"Dispatch logger whitelist mode")),e.createElement(l,{className:"beef-meddle-divider"}),e.createElement("div",{class:"beef-meddle-column"},e.createElement(g,{k:"dispatchIgnoreList"},"FluxDispatcher calls to hide when not in whitelist mode (comma separated)"),e.createElement(g,{k:"dispatchWhiteList"},"FluxDispatcher calls to allow when in whitelist mode (comma separated)")))}function j({text:t,color:r,size:n,look:s,func:c,style:fe}){return e.createElement(i,{style:fe,color:i.Colors[r]||i.Colors.BRAND,size:i.Sizes[n]||i.Sizes.SMALL,look:i.Looks[s]||i.Looks.FILLED,onClick:c},t)}function ne(t){return e.createElement("div",null,e.createElement(g,{k:"serverId"},"Server ID"),e.createElement(l,{className:"beef-meddle-divider"}),e.createElement("div",{class:"beef-meddle-row"},e.createElement(v,{k:"serverLurkMode"},"Join as lurker"),e.createElement(j,{style:{marginLeft:"auto"},text:"Join",size:"SMALL",func:async()=>{L(a.persist.ghost.serverId,{lurker:a.persist.ghost.serverLurkMode})}})))}const I={isPlaying:!1,position:0,track:{name:"Song Name",album:{image:{url:"https://raw.githubusercontent.com/Cumcord/assets/main/logo/filled.svg"},name:"Album Name"},duration:0,artists:[{name:"Artist Name",external_urls:{},href:{},id:"stub",type:"artist",url:"Artist URL"}]}},p=$.nests.make(Object.assign({},I));function se(t){for(let r of Object.keys(p.ghost))p.store[r]=t.track||t.context?t[r]:I[r]}function m({value:t,onChange:r,variant:n="column",fixedWidth:s,children:c}){if(n!=="column"&&n!=="row")throw new Error("Component Error - Textbox: variant should be column (default) or row");return e.createElement("div",{class:n==="column"?"beef-meddle-column":"beef-meddle-row beef-meddle-center"},e.createElement(o,{style:s?{width:s}:{}},c),e.createElement(N,{value:t,onChange:r}))}function ae(t){k.useNest(p);const r=p.store,n=p.ghost;return e.createElement("div",null,e.createElement("div",{className:"beef-meddle-row"},e.createElement("div",{className:"beef-meddle-row beef-meddle-center"},e.createElement("img",{src:n.track.album.image.url,height:"120",width:"120"}),e.createElement("div",{className:"beef-meddle-column"},e.createElement(m,{fixedWidth:"0.75rem",variant:"row",value:n.track.name,onChange:s=>{r.track.name=s}}),e.createElement(m,{fixedWidth:"0.75rem",variant:"row",value:n.track.artists.map(s=>s.name).join(", "),onChange:s=>{r.track.artists=s.split(", ").map(c=>({name:c,external_urls:{},href:{},id:"stub",type:"artist",url:"Artist URL"}))}},"by"),e.createElement(m,{fixedWidth:"0.75rem",variant:"row",value:n.track.album.name,onChange:s=>{r.track.album.name=s}},"on"))),e.createElement("div",{className:"beef-meddle-column",style:{marginLeft:"auto"}},e.createElement(j,{text:"Dispatch",size:"MEDIUM",func:async()=>{f.dispatch({...n,type:"SPOTIFY_PLAYER_STATE"})}}))),e.createElement(l,{className:"beef-meddle-divider"}),e.createElement("div",{className:"beef-meddle-row"},e.createElement("div",{className:"beef-meddle-column"},e.createElement(m,{fixedWidth:"3rem",variant:"row",value:n.position,onChange:s=>{r.position=s}},"Position (ms)"),e.createElement(m,{fixedWidth:"3rem",variant:"row",value:n.track.duration,onChange:s=>{r.track.duration=s}},"Duration (ms)")),e.createElement("div",{className:"beef-meddle-row beef-meddle-center",style:{marginLeft:"auto"}},e.createElement(o,null,"Playing"),e.createElement(b,{checked:n.isPlaying,onChange:s=>{r.isPlaying=s}}))),e.createElement(l,{className:"beef-meddle-divider"}),e.createElement(m,{value:n.track.album.image.url,onChange:s=>{r.track.album.image.url=s}},"Image URL (only supports ",e.createElement("code",null,"https://i.scdn.co/image/*")," urls)"),e.createElement(l,{className:"beef-meddle-divider"}),e.createElement(o,{className:"beef-meddle-subtext"},"If this is out of date/incorrect, try updating the current state of your Spotify player."))}function le(t){return e.createElement(w.ErrorBoundary,null,e.createElement("div",{className:"beef-meddle-settings"},e.createElement(J,{items:[{text:"General",component:H},{text:"FluxDispatcher",component:re},{text:"Servers",component:ne},{text:"Spotify",component:ae}]})))}var ie=()=>A.registerSection("MEDDLE","Meddle",ee(le));function oe(){return x.after("dispatch",f,t=>{!a.persist.ghost.dispatchLogEnabled||a.persist.ghost.dispatchWhiteListMode&&!a.persist.ghost.dispatchWhiteList.split(",").includes(t[0].type)||a.persist.ghost.dispatchIgnoreList.split(",").includes(t[0].type)||console.log(t[0])})}const y=new Map;y.set("SPOTIFY_PLAYER_STATE",se);function ce(){for(const[t,r]of y)f.subscribe(t,r);return()=>{for(const[t,r]of y)f.unsubscribe(t,r)}}var de=()=>x.injectCSS(".beef-meddle-row{display:flex;gap:.5rem}.beef-meddle-column{display:flex;flex-direction:column;gap:.5rem}.beef-meddle-divider{margin-top:.5rem;margin-bottom:.5rem}.beef-meddle-subtext{font-size:x-small;color:var(--text-muted)}.beef-meddle-card{padding:1rem;border-radius:.5rem;background-color:var(--background-secondary)}.beef-meddle-center{display:flex;justify-content:center;align-items:center}.beef-meddle-persist-textbox-wrapper *{display:flex;flex-direction:column-reverse}.beef-meddle-persist-textbox-wrapper * *{width:100%}.beef-meddle-persist-switch-wrapper{display:flex}.beef-meddle-persist-switch-wrapper *{margin-bottom:0!important;align-items:center}.beef-meddle-switch{display:flex;align-items:center;gap:.5rem}");te({dispatchLogEnabled:!1,dispatchIgnoreList:"",dispatchWhiteList:"",dispatchWhiteListMode:!1,serverId:"",serverLurkMode:!1,generalExposeObject:!0});const me=[F(),ie(),oe(),ce(),de()];function ue(){_.forEachRight(me,t=>t())}return h.onUnload=ue,Object.defineProperty(h,"__esModule",{value:!0}),h})({},cumcord.pluginData,cumcord.modules.webpack,cumcord.patcher,cumcord.modules.common.React,cumcord.ui.components,cumcord.utils,cumcord.plugins,cumcord.modules.common.React,cumcord.modules.internal,cumcord.ui.userSettings);
