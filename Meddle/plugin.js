(function(p,l,u,v,j,w,x,ie,C,I,O){"use strict";function P(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}function D(t){if(t&&t.__esModule)return t;var s=Object.create(null);return t&&Object.keys(t).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(s,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}}),s.default=t,Object.freeze(s)}var e=D(j),d=P(C);const[$,f,{GuildFeatures:z},N,a,c,g,i,{joinGuild:k},{getCurrentUser:B},o]=u.batchFind(({findByProps:t,findByDisplayName:s})=>{s("SettingsView"),t("dirtyDispatch"),t("GuildFeatures"),s("FormTitle"),s("FormText"),s("FormDivider"),s("Switch"),t("Sizes","Colors","Looks","DropdownSizes"),t("joinGuild"),t("getCurrentUser"),s("TextInput")});var A=Object.freeze({__proto__:null,SettingsView:$,FluxDispatcher:f,GuildFeatures:z,FormTitle:N,FormText:a,FormDivider:c,Switch:g,Button:i,joinGuild:k,getCurrentUser:B,TextInput:o});const R={modules:{...A}};function S(){return l.persist.ghost.generalExposeObject&&!window.Meddle?window.Meddle=R:!l.persist.ghost.generalExposeObject&&window.Meddle&&delete window.Meddle,()=>{delete window.Meddle}}function U(t){return e.createElement("div",{className:"beef-meddle-settings-title"},e.createElement(N,{tag:"h1"},"Meddle"),e.createElement(a,null,"A tool for those who like to mess with the Maze."),e.createElement(a,{className:"beef-meddle-subtext"},"Currently very WIP"))}function W({items:t}){let[s,r]=e.useState(0);return e.createElement("div",null,e.createElement("div",{className:"beef-meddle-settings-section"},e.createElement(U,null),e.createElement(c,{className:"beef-meddle-settings-divider"}),e.createElement("div",{className:"beef-meddle-tabbar"},t.map((n,m)=>e.createElement("button",{className:"beef-meddle-button"+(m===s?" beef-meddle-selected":""),onClick:()=>r(m)},e.createElement(a,null,n.text))))),e.createElement(c,{className:"beef-meddle-settings-divider"}),e.createElement("div",{className:"beef-meddle-settings-section beef-meddle-tabbar-content"},e.createElement(w.ErrorBoundary,null,e.createElement(t[s].component,{goTo:r}))))}function G(t){return e.createElement("div",{className:"beef-meddle-settings-tab"},e.createElement("div",{class:"beef-meddle-switch-wrapper"},e.createElement(g,{checked:l.persist.ghost.generalExposeObject,onChange:s=>{l.persist.store.generalExposeObject=s,S()}}),e.createElement(a,null,"Expose a Meddle object on the window",e.createElement(a,{class:"beef-meddle-subtext"},"This contains several utilities such as some common Webpack modules."))))}const L=u.findByDisplayName("FormText"),Y=u.findByDisplayName("Switch"),V=u.findByDisplayName("TextInput");u.findByDisplayName("Select",!1).SingleSelect;const F=t=>({display:"flex",alignItems:"center",gap:".5rem",marginBottom:"1rem",marginLeft:t!==void 0?"1rem":0}),h=({k:t,depends:s,children:r})=>d.default.createElement("div",{style:F(s)},d.default.createElement(Y,{checked:l.persist.ghost[t],disabled:s!==void 0&&!l.persist.ghost[s],onChange:n=>l.persist.store[t]=n}),d.default.createElement(L,{children:r})),J=({k:t,depends:s,children:r})=>d.default.createElement("div",{style:F(s)},d.default.createElement(V,{value:l.persist.ghost[t],disabled:s!==void 0&&!l.persist.ghost[s],onChange:n=>l.persist.store[t]=n}),d.default.createElement(L,{children:r})),q=t=>s=>(x.useNest(l.persist),t(s)),H=(t,s=l.persist)=>{for(const r in t)s.ghost[r]===void 0&&(s.store[r]=t[r])};function E({k:t,depends:s,children:r}){return e.createElement("div",{class:"beef-meddle-textbox-wrapper"},e.createElement(J,{k:t,depends:s},r))}function K(t){return e.createElement("div",{className:"beef-meddle-settings-tab"},e.createElement(h,{k:"dispatchLogEnabled"},"Log all FluxDispatcher calls to console"),e.createElement(h,{k:"dispatchWhiteListMode"},"Dispatch logger whitelist mode"),e.createElement(E,{k:"dispatchIgnoreList"},"FluxDispatcher calls to hide when not in whitelist mode (comma separated)"),e.createElement(E,{k:"dispatchWhiteList"},"FluxDispatcher calls to allow when in whitelist mode (comma separated)"))}function M({text:t,color:s,size:r,look:n,func:m}){return e.createElement(i,{color:i.Colors[s]||i.Colors.BRAND,size:i.Sizes[r]||i.Sizes.SMALL,look:i.Looks[n]||i.Looks.FILLED,className:"beef-ms-settings-card-button",onClick:m},t)}function Q(t){return e.createElement("div",{className:"beef-meddle-settings-tab"},e.createElement(E,{k:"serverId"},"Server ID"),e.createElement(h,{k:"serverLurkMode"},"Join as lurker"),e.createElement(M,{text:"Join",size:"MEDIUM",func:async()=>{k(l.persist.ghost.serverId,{lurker:l.persist.ghost.serverLurkMode})}}))}const T={isPlaying:!1,position:0,track:{name:"Song Name",album:{image:{url:"https://raw.githubusercontent.com/Cumcord/assets/main/logo/filled.svg"},name:"Album Name"},duration:0,artists:[{name:"Artist Name",external_urls:{},href:{},id:"stub",type:"artist",url:"Artist URL"}]}},b=I.nests.make(Object.assign({},T));function X(t){for(let s of Object.keys(b.ghost))b.store[s]=t.track||t.context?t[s]:T[s]}function Z(t){x.useNest(b);const s=b.store,r=b.ghost;return e.createElement("div",null,e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement("img",{src:r.track.album.image.url,height:"120",width:"120"}),e.createElement("div",{className:"beef-meddle-spotify-column"},e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement("div",{style:{width:"0.75rem"}}),e.createElement(o,{value:r.track.name,onChange:n=>{s.track.name=n}})),e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement(a,{style:{width:"0.75rem"}},"by"),e.createElement(o,{value:r.track.artists.map(n=>n.name).join(", "),onChange:n=>{s.track.artists=n.split(", ").map(m=>({name:m,external_urls:{},href:{},id:"stub",type:"artist",url:"Artist URL"}))}})),e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement(a,{style:{width:"0.75rem"}},"on"),e.createElement(o,{value:r.track.album.name,onChange:n=>{s.track.album.name=n}})))),e.createElement("div",{className:"beef-meddle-spotify-column",style:{marginLeft:"auto"}},e.createElement(M,{text:"Dispatch",size:"MEDIUM",func:async()=>{f.dispatch({...r,type:"SPOTIFY_PLAYER_STATE"})}}))),e.createElement(c,{className:"beef-meddle-settings-divider"}),e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement("div",{className:"beef-meddle-spotify-column"},e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement(a,{style:{width:"3rem"}},"Position (ms)"),e.createElement(o,{value:r.position,onChange:n=>{s.position=n}})),e.createElement("div",{className:"beef-meddle-spotify-row"},e.createElement(a,{style:{width:"3rem"}},"Duration (ms)"),e.createElement(o,{value:r.track.duration,onChange:n=>{s.track.duration=n}}))),e.createElement("div",{className:"beef-meddle-spotify-row",style:{marginLeft:"auto"}},e.createElement(a,null,"Playing"),e.createElement(g,{checked:r.isPlaying,onChange:n=>{s.isPlaying=n}}))),e.createElement(c,{className:"beef-meddle-settings-divider"}),e.createElement("div",{className:"beef-meddle-spotify-column"},e.createElement(a,null,"Image URL (only supports ",e.createElement("code",null,"https://i.scdn.co/image/*")," urls)"),e.createElement(o,{value:r.track.album.image.url,onChange:n=>{s.track.album.image.url=n}})),e.createElement(c,{className:"beef-meddle-settings-divider"}),e.createElement(a,{className:"beef-meddle-subtext"},"If this is out of date/incorrect, try updating the current state of your Spotify player."))}function ee(t){return e.createElement(w.ErrorBoundary,null,e.createElement("div",{className:"beef-meddle-settings"},e.createElement(W,{items:[{text:"General",component:G},{text:"FluxDispatcher",component:K},{text:"Servers",component:Q},{text:"Spotify",component:Z}]})))}var te=()=>O.registerSection("MEDDLE","Meddle",q(ee));function se(){return v.after("dispatch",f,t=>{!l.persist.ghost.dispatchLogEnabled||l.persist.ghost.dispatchWhiteListMode&&!l.persist.ghost.dispatchWhiteList.split(",").includes(t[0].type)||l.persist.ghost.dispatchIgnoreList.split(",").includes(t[0].type)||console.log(t[0])})}const y=new Map;y.set("SPOTIFY_PLAYER_STATE",X);function re(){for(const[t,s]of y)f.subscribe(t,s);return()=>{for(const[t,s]of y)f.unsubscribe(t,s)}}var ne=()=>v.injectCSS(".beef-meddle-settings .beef-meddle-settings-title h1{margin-bottom:.2rem}.beef-meddle-settings .beef-meddle-settings-section{padding:1rem;border-radius:.5rem;background-color:var(--background-secondary)}.beef-meddle-settings .beef-meddle-settings-tab{padding:.25rem}.beef-meddle-settings .beef-meddle-settings-divider{margin-top:.5rem;margin-bottom:.5rem}.beef-meddle-subtext{font-size:x-small;color:var(--text-muted)}.beef-meddle-row{display:flex;gap:1rem}.beef-meddle-row :not(:last-child){flex:1}.beef-meddle-spotify-row{display:flex;gap:.5rem;align-items:center}.beef-meddle-spotify-column{display:flex;gap:.25rem;flex-direction:column}.beef-meddle-textbox-wrapper *{display:flex;flex-direction:column-reverse}.beef-meddle-textbox-wrapper * *{width:100%}.beef-meddle-switch-wrapper{display:flex;align-items:center;gap:.5rem}.beef-meddle-tabbar{padding:.25rem;display:flex;flex-direction:row;gap:.5rem}.beef-meddle-tabbar .beef-meddle-button *{cursor:pointer}.beef-meddle-tabbar *{padding:.2rem;border-radius:.3rem;width:fit-content;text-align:center;background:none}.theme-dark .beef-meddle-tabbar .beef-meddle-selected{background:rgba(255,255,255,.2666666667)}.theme-light .beef-meddle-tabbar .beef-meddle-selected{background:rgba(0,0,0,.2)}");H({dispatchLogEnabled:!1,dispatchIgnoreList:"",dispatchWhiteList:"",dispatchWhiteListMode:!1,serverId:"",serverLurkMode:!1,generalExposeObject:!0});const le=[S(),te(),se(),re(),ne()];function ae(){_.forEachRight(le,t=>t())}return p.onUnload=ae,Object.defineProperty(p,"__esModule",{value:!0}),p})({},cumcord.pluginData,cumcord.modules.webpack,cumcord.patcher,cumcord.modules.common.React,cumcord.ui.components,cumcord.utils,cumcord.plugins,cumcord.modules.common.React,cumcord.modules.internal,cumcord.ui.userSettings);
